Two Phase Termination
保证资源正确释放。

执行状态——线程执行工作单元
线程结束的第一阶段——线程受理终止要求
线程结束的第二阶段——线程处理终止请求
(
考虑：
1. 保证安全性，如涉及对共享资源的操作
2. 百分之百地确保线程结束，避免死循环、阻塞等异常导致无法结束
3. 对资源的释放时间要控制在可控的范围内
)

如ClientHandler中对run方法的异常时资源处理
socket和thread都属于严重依赖操作系统资源的对象，各个操作系统中可供创建的线程数量有限，需要确保客户端即使异常关闭，也能
尽快释放socket资源,two phase termination设计模式比较好的解决方案
增加finally对资源彻底释放，捕获的是Throwable异常。

进程不论主动关闭还是被动关闭(出现异常)都需要对持有的资源释放，注入hook方式进行两阶段结束。


